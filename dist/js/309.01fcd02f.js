"use strict";(self["webpackChunksng_rynok_new"]=self["webpackChunksng_rynok_new"]||[]).push([[309],{309:function(e,l,a){a.r(l),a.d(l,{default:function(){return O}});var r=a(252),i=a(963),o=a(577);const n=e=>((0,r.dD)("data-v-579ac40c"),e=e(),(0,r.Cn)(),e),t={class:"change-product"},u=n((()=>(0,r._)("h2",null," Здесь вы можете изменить описание, цену, изображение ваших товаров ",-1))),c={class:"label"},s=n((()=>(0,r._)("span",null,null,-1))),d={class:"label"},p=n((()=>(0,r._)("span",null," Цена за килограмм: ",-1))),v={class:"label"},g=n((()=>(0,r._)("span",null," Категория товара ",-1))),m=(0,r.uE)('<optgroup label="Выберите вид товара" data-v-579ac40c><option value="Фрукты" data-v-579ac40c>Фрукты</option><option value="Сухофрукты" data-v-579ac40c>Сухофркуты</option><option value="Овощи" data-v-579ac40c>Овощи</option><option value="Орехи" data-v-579ac40c>Орехи</option></optgroup>',1),_=[m],y={class:"checkboxex"},b={class:"checkboxex__wrapper"},w=n((()=>(0,r._)("span",null,"Доступна ли доставка?",-1))),h={class:"cntr"},k=n((()=>(0,r._)("label",{for:"cbx-1",class:"cbx"},null,-1))),x={class:"checkboxex__wrapper relative",ref:"checkboxRef"},f=n((()=>(0,r._)("span",null,"Является ли ваш продукт ЭКО",-1))),D=n((()=>(0,r._)("ion-icon",{name:"help-outline",class:"icon"},null,-1))),E=n((()=>(0,r._)("p",null,"Экологически чистый продукт без химикатов и добавок",-1))),P={class:"cntr"},q=n((()=>(0,r._)("label",{for:"cbx-2",class:"cbx"},null,-1))),H={class:"label label-file"},V={class:"new-input"},U=n((()=>(0,r._)("div",{class:"file-btn"},[(0,r._)("span",null,"Выберите фото"),(0,r._)("div",{class:"box"})],-1))),z={key:0,class:"image-name"},I={key:1,class:"image-name"},Z={key:0,style:{"font-size":"1.28rem"},class:"error"},T={class:"label"},M={key:0,class:"error"},C={key:1,class:"error"},Q={key:2,class:"error"},j={key:3,class:"error"},R={key:4,class:"btn form__btn"};function B(e,l,a,n,m,B){const A=(0,r.up)("DisabledButton");return(0,r.wg)(),(0,r.iD)("div",t,[(0,r._)("form",{class:"form",onSubmit:l[9]||(l[9]=(0,i.iM)(((...e)=>n.updateProduct&&n.updateProduct(...e)),["prevent"]))},[u,(0,r._)("label",c,[s,(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=e=>n.title=e),placeholder:"Название товара",required:""},null,512),[[i.nr,n.title,void 0,{trim:!0}]])]),(0,r._)("div",d,[p,(0,r.wy)((0,r._)("input",{type:"number","onUpdate:modelValue":l[1]||(l[1]=e=>n.price=e),placeholder:"Напишите цену в рублях...",required:""},null,512),[[i.nr,n.price,void 0,{trim:!0}]])]),(0,r._)("div",v,[g,(0,r.wy)((0,r._)("select",{"onUpdate:modelValue":l[2]||(l[2]=e=>n.category=e)},_,512),[[i.bM,n.category,void 0,{trim:!0}]])]),(0,r._)("div",y,[(0,r._)("div",b,[w,(0,r._)("div",h,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=e=>n.delivery=e),id:"cbx-1",class:"hidden-xs-up"},null,512),[[i.e8,n.delivery]]),k])]),(0,r._)("div",x,[f,D,(0,r._)("div",{onMouseenter:l[4]||(l[4]=(...l)=>e.showQuote&&e.showQuote(...l)),onMouseleave:l[5]||(l[5]=(...l)=>e.hideQuote&&e.hideQuote(...l)),class:"invis-box"},null,32),E,(0,r._)("div",P,[(0,r.wy)((0,r._)("input",{type:"checkbox","onUpdate:modelValue":l[6]||(l[6]=e=>n.eco=e),id:"cbx-2",class:"hidden-xs-up"},null,512),[[i.e8,n.eco]]),q])],512)]),(0,r._)("label",H,[(0,r._)("input",{onInput:l[7]||(l[7]=(...e)=>n.handleImage&&n.handleImage(...e)),class:"input",type:"file"},null,32),(0,r._)("div",V,[U,n.image?((0,r.wg)(),(0,r.iD)("div",z,(0,o.zw)(n.image.name),1)):((0,r.wg)(),(0,r.iD)("div",I,"Название изображения"))]),n.imageTypeError?((0,r.wg)(),(0,r.iD)("div",Z,(0,o.zw)(n.imageTypeError),1)):(0,r.kq)("",!0)]),(0,r._)("label",T,[(0,r.wy)((0,r._)("textarea",{"onUpdate:modelValue":l[8]||(l[8]=e=>n.description=e),placeholder:"Опишите ваш продукт (макс 300 символов)",maxlength:"300",required:""},null,512),[[i.nr,n.description,void 0,{trim:!0}]])]),n.error?((0,r.wg)(),(0,r.iD)("div",M,(0,o.zw)(n.error),1)):(0,r.kq)("",!0),n.updateError?((0,r.wg)(),(0,r.iD)("div",C,(0,o.zw)(n.updateError),1)):(0,r.kq)("",!0),n.storageError?((0,r.wg)(),(0,r.iD)("div",Q,(0,o.zw)(n.storageError),1)):(0,r.kq)("",!0),n.imageTypeError?((0,r.wg)(),(0,r.iD)("div",j,(0,o.zw)(n.imageTypeError),1)):(0,r.kq)("",!0),n.isPending?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("button",R,"Изменить описания")),n.isPending?((0,r.wg)(),(0,r.j4)(A,{key:5,title:"Вносим изменения"})):(0,r.kq)("",!0)],32)])}var A=a(892),L=a(247),S=a(258),Y=a(20),F=a(300),G=a(262),J={name:"ChangeProductView",components:{DisabledButton:Y.Z},setup(){const e=F.Z.currentRoute.value.params.id,l=(0,G.iH)(""),a=(0,G.iH)(""),i=(0,G.iH)(""),o=(0,G.iH)(null),n=(0,G.iH)(null),t=(0,G.iH)(""),u=(0,G.iH)(null),c=(0,G.iH)(null),s=(0,G.iH)(null),d=(0,G.iH)(null),{document:p,error:v}=(0,A.Z)("products",e),{updateDoc:g,error:m}=(0,L.Z)("products",e),{uploadImage:_,deleteImage:y,url:b,error:w,filePath:h}=(0,S.Z)(),k=["image/png","image/jpeg"],x=e=>{let l=e.target.files[0];l&&k.includes(l.type)?(u.value=l,console.log("new image1",u.value)):(c.value="Только png/jpen форматы",setTimeout((()=>{c.value=null}),3e3))};(0,r.YP)(p,(()=>{f()}));const f=()=>{l.value=p.value.title,a.value=p.value.price,i.value=p.value.category,t.value=p.value.description,o.value=p.value.delivery,n.value=p.value.eco},D=async()=>{s.value=!0,u.value&&(await y(p.value.filePath),console.log("image VALUE inside handle",u.value),await _(u.value)),await g({title:l.value,price:a.value,category:i.value,description:t.value,filePath:h.value,delivery:o.value,eco:n.value}),b.value&&await g({imageUrl:b.value}),s.value=null,v.value||m.value||F.Z.push({name:"MarketView"})};return{title:l,price:a,category:i,description:t,delivery:o,eco:n,document:p,handleImage:x,error:v,isPending:s,imageTypeError:c,updateError:m,checkboxRef:d,storageError:w,updateProduct:D,image:u}}},K=a(744);const N=(0,K.Z)(J,[["render",B],["__scopeId","data-v-579ac40c"]]);var O=N}}]);
//# sourceMappingURL=309.01fcd02f.js.map